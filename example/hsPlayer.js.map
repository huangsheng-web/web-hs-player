{"version":3,"file":"hsPlayer.js","sources":["../src/utils/event.js","../src/net/video-event.js","../src/utils/debug.js","../src/buffer/buffer.js","../src/net/ws-reader.js","../src/hs-player.js"],"sourcesContent":["export default class Event {\r\n  constructor (type) {\r\n    this.listener = {};\r\n    this.type = type || '';\r\n  }\r\n  on(event, fn) {\r\n    if (!this.listener[event]) {\r\n      this.listener[event] = [];\r\n    }\r\n    this.listener[event].push(fn);\r\n    return true;\r\n  }\r\n  off(event, fn) {\r\n    if (this.listener[event]) {\r\n      this.listener[event] = null;\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n  offAll() {\r\n    this.listener = {};\r\n  }\r\n  dispatch(event, data) {\r\n    if (this.listener[event])  {\r\n      this.listener[event].forEach(cb => {\r\n        cb.apply(null, [data]);\r\n      })\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n}","// 播放器自身的状态控制列表。\r\nconst VideoEvents = {\r\n  MIME_EVENT: 'MIME_EVENT', // 获取到mime\r\n  READY_EVENT: 'READY_EVENT', // ws连接成功\r\n  CLOSE_EVENT: 'CLOSE_EVENT', // ws关闭\r\n  ERROR_EVENT: 'ERROR_EVENT', // ws错误\r\n  PLAY_EVENT: 'PLAY_EVENT',// 可以初始化source buffer\r\n  PAUSE_EVENT: 'PAUSE_EVENT',// 暂停\r\n  VIDEO_EVENT: 'VIDEO_EVENT',// 接受到媒体片段\r\n  SEEK_EVENT: 'SEEK_EVENT',// video stream seek event\r\n  SPEED_EVENT: 'SPEED_EVENT',// video stream send speed\r\n  COMPLETE_EVENT: 'COMPLETE_EVENT', // 视频流已经全部发送完\r\n};\r\n\r\nexport default VideoEvents;","let logger;\r\nlet errorLogger;\r\n\r\nexport function setLogger() {\r\n  logger = console.log;\r\n  errorLogger = console.error;\r\n}\r\n\r\nexport function isEnable() {\r\n  return logger != null;\r\n}\r\n\r\nexport function log(message, ...optionalParams) {\r\n  if (logger) {\r\n    logger(message, ...optionalParams);\r\n  }\r\n}\r\nexport function error(message, ...optionalParams) {\r\n  if (errorLogger) {\r\n    errorLogger(message, ...optionalParams);\r\n  }\r\n}\r\n","/**\r\n * 视频流buffer管理\r\n * */\r\nimport Event from '../utils/event';\r\nimport * as debug from '../utils/debug';\r\nexport default class BufferController extends Event {\r\n\r\n  static get ERROR_EVENT() {\r\n    return 'ERROR_EVENT'\r\n  }\r\n\r\n  constructor(sourceBuffer, cleanOffset) {\r\n\r\n    super('BufferController');\r\n\r\n    this.TAG = '[BufferController]';\r\n\r\n    this.sourceBuffer = sourceBuffer;\r\n\r\n\r\n    this.sourceBuffer.addEventListener('updateend', this._onUpdateEnd.bind(this));\r\n    this.sourceBuffer.addEventListener('onerror', this._onError.bind(this));\r\n\r\n    this.queue = []; // buffer队列\r\n\r\n    this.cleanRanges = []; // 可清除的buffer\r\n\r\n    this.cleaning = false; // 是否正在清理buffer\r\n\r\n    this.cleanOffset = cleanOffset; // 清除buf时剩余的时长，单位秒\r\n  }\r\n\r\n  // 收到媒体资源并已喂到播放器\r\n  _onUpdateEnd() {\r\n\r\n    if (this.cleanRanges.length) {\r\n      this.doCleanup();\r\n      return;\r\n    }\r\n    this.cleaning = false;\r\n\r\n  }\r\n\r\n  // sourceBuffer异常\r\n  _onError() {\r\n    this.dispatch(BufferController.ERROR_EVENT, { tag: this.TAG, msg: 'buffer error' })\r\n  }\r\n\r\n  doAppend() {\r\n    if (this.sourceBuffer.updating || !this.queue.length) {\r\n      return;\r\n    }\r\n    let data = this.queue.shift();\r\n\r\n    try {\r\n      this.sourceBuffer.appendBuffer(data);\r\n    } catch (e) {\r\n      if (e.name === 'QuotaExceededError') {\r\n        debug.log(`${this.type} buffer quota full`);\r\n        this.dispatch(BufferController.ERROR_EVENT, { tag: this.TAG, msg: 'buffer error' });\r\n        return;\r\n      }\r\n      debug.error(this.TAG,`Error occured while appending ${this.TAG} buffer`);\r\n      this.dispatch(BufferController.ERROR_EVENT, { tag: this.TAG, msg: 'buffer update error' });\r\n    }\r\n  }\r\n\r\n  // 整理需要清空的buffer\r\n  initCleanBuf() {\r\n    if (this.sourceBuffer.updating) {\r\n      return false;\r\n    }\r\n    if (this.sourceBuffer.buffered && this.sourceBuffer.buffered.length && !this.cleaning) {\r\n      for (let i = 0; i < this.sourceBuffer.buffered.length; ++i) {\r\n        let start = this.sourceBuffer.buffered.start(i);\r\n        let end = this.sourceBuffer.buffered.end(i);\r\n\r\n        if ((end - start) > this.cleanOffset) {\r\n          this.cleanRanges.push([start, end]);\r\n        }\r\n      }\r\n      this.doCleanup();\r\n    }\r\n  }\r\n\r\n  // 清除buffer\r\n  doCleanup() {\r\n    if (!this.cleanRanges.length) {\r\n      this.cleaning = false;\r\n      return;\r\n    }\r\n    while (this.cleanRanges.length > 0 && !this.sourceBuffer.updating) {\r\n      let range = this.cleanRanges.shift();\r\n      debug.log(this.TAG,`${this.type} remove range [${range[0]} - ${range[1]})`);\r\n      this.cleaning = true;\r\n      this.sourceBuffer.remove(range[0], range[1]);\r\n    }\r\n  }\r\n\r\n  // 喂媒体片段到播放器\r\n  feed(data) {\r\n    this.queue.push(data);\r\n    this.doAppend();\r\n  }\r\n\r\n  // 销毁buffer管理器\r\n  destroy() {\r\n    try {\r\n      this.sourceBuffer.abort();\r\n    } catch(e) {\r\n      debug.log(this.TAG, e.message);\r\n    }\r\n    this.sourceBuffer.removeEventListener('updateend', this._onUpdateEnd.bind(this));\r\n    this.sourceBuffer.removeEventListener('error', this._onError.bind(this));\r\n\r\n    this.cleaning = false;\r\n    this.cleanRanges = [];\r\n\r\n    this.queue = [];\r\n    this.sourceBuffer = null;\r\n    this.offAll();\r\n  }\r\n}\r\n","\r\n/**\r\n * 视频流ws服务管理\r\n * */\r\nimport Event from '../utils/event';\r\nimport VideoEvents from './video-event';\r\nimport * as debug from '../utils/debug';\r\nexport default class WSReader extends Event {\r\n\r\n  constructor(url) {\r\n    super('WSReader');\r\n    this.TAG = '[WSReader]';\r\n    this.ws = new WebSocket(url);\r\n    this.ws.binaryType = 'arraybuffer';\r\n    this.ws.onopen = this._onWebSocketOpen.bind(this);\r\n    this.ws.onerror = this._onWebSocketError.bind(this);\r\n    this.ws.onmessage = this._onWebSocketMessage.bind(this);\r\n    this.ws.onclose = this._onWebSocketClose.bind(this);\r\n\r\n    this.isOpen = false;\r\n    this.wsMethods = {\r\n      open: 'open', // 请求mime\r\n      play: 'play', // 请求推流\r\n      pause: 'pause', // 停止推流\r\n      close: 'close', // 关闭ws连接\r\n      slow: 'slow', // 请求降低推流频率\r\n      fast: 'fast', // 请求提高推流频率\r\n      complete: 'complete', // 视频流已经全部发送完。\r\n    };\r\n    this.seq = 1;\r\n    this.sendRate = 1; // 视频流传输频率，用来调整播放速度\r\n    this.isFullPause = false;\r\n  }\r\n\r\n  // 发送play指令\r\n  play() {\r\n    if(this.ws == null || this.ws.readyState != WebSocket.OPEN) {\r\n      debug.error(this.TAG, 'play signal ws not ok');\r\n      return false;\r\n    }\r\n    this.ws.send(JSON.stringify({method: this.wsMethods.play, seq: this.seq}))\r\n  }\r\n\r\n  // 发送pause指令 isFullPause 判断是否由于缓存区满了发送的指令\r\n  pause(isFullPause) {\r\n    if(this.ws == null || this.ws.readyState != WebSocket.OPEN) {\r\n      debug.error(this.TAG, 'pause signal ws not ok');\r\n      return false;\r\n    }\r\n    this.isFullPause = isFullPause ? true : false;\r\n    this.ws.send(JSON.stringify({method: this.wsMethods.pause, seq: this.seq}))\r\n  }\r\n\r\n  // 发送close指令\r\n  close() {\r\n    if(this.ws == null || this.ws.readyState != WebSocket.OPEN) {\r\n      debug.error(this.TAG, 'close signal ws not ok');\r\n      return false;\r\n    }\r\n    this.ws.send(JSON.stringify({method: this.wsMethods.close, seq: this.seq}))\r\n  }\r\n\r\n  // 发送speed指令\r\n  speed(rateObj) {\r\n    if(this.ws == null || this.ws.readyState != WebSocket.OPEN) {\r\n      debug.error(this.TAG, 'speed signal ws not ok');\r\n      return false;\r\n    }\r\n    this.sendRate = rateObj.value;\r\n    // 如果rateObj下的value大于等于1发送fast,否则发送slow\r\n    if (rateObj.value >= 1) {\r\n      this.ws.send(JSON.stringify({method:'fast', seq: this.seq, speed: rateObj.speed}));\r\n    } else {\r\n      this.ws.send(JSON.stringify({method:'slow', seq: this.seq, speed: rateObj.speed}));\r\n    }\r\n  }\r\n\r\n  // 监听ws的open事件, 准备接受媒体流数据\r\n  _onWebSocketOpen(ev) {\r\n    this.ws.send(JSON.stringify({method: this.wsMethods.open, seq: this.seq}));\r\n    debug.log(`ws is ready ${ev}`)\r\n    this.dispatch(VideoEvents.READY_EVENT, {tag: this.TAG, msg: 'ws is ready'})\r\n  }\r\n  // 监听ws的error事件\r\n  _onWebSocketError(ev) {\r\n    debug.error(`ws is error ${ev}`)\r\n    this.dispatch(VideoEvents.ERROR_EVENT, {tag: this.TAG, msg: 'ws is error'})\r\n  }\r\n  // 处理websocket message\r\n  _onWebSocketMessage(ev) {\r\n    let {data} = ev;\r\n    if (data instanceof ArrayBuffer) {\r\n      this.dispatch(VideoEvents.VIDEO_EVENT, data);\r\n    } else {\r\n      this.wsMessageHandle(data)\r\n    }\r\n  }\r\n  // 监听ws的close事件\r\n  _onWebSocketClose(ev) {\r\n    debug.log(`ws is close ${ev}`);\r\n    this.dispatch(VideoEvents.CLOSE_EVENT, {tag: this.TAG, msg: 'ws is close'})\r\n  }\r\n\r\n  // 根据ws主体内容来分配事件\r\n  wsMessageHandle(data) {\r\n    let mes = JSON.parse(data);\r\n    switch (mes.method) {\r\n      case 'open':\r\n        debug.log(`get mime ${mes.mime}`);\r\n        this.openHandle(mes)\r\n        break;\r\n      case 'play':\r\n        debug.log(`ws play signal`);\r\n        this.playHandle(mes)\r\n        break;\r\n      case 'pause':\r\n        debug.log(`ws pause signal`);\r\n        this.pauseHandle(mes)\r\n        break;\r\n      case 'close':\r\n        debug.log(`ws close signal`);\r\n        this.closeHandle()\r\n        break;\r\n      case 'slow':\r\n        debug.log(`ws slow signal`);\r\n        this.speedHandle(mes)\r\n        break;\r\n      case 'fast':\r\n        debug.log(`ws fast signal`);\r\n        this.speedHandle(mes)\r\n        break;\r\n      case 'complete':\r\n        debug.log(`ws complete signal`);\r\n        this.completeHandle()\r\n        break;\r\n    }\r\n  }\r\n  // 处理ws open指令\r\n  openHandle(data) {\r\n    this.dispatch(VideoEvents.MIME_EVENT, data);\r\n  }\r\n\r\n  // 处理ws play指令\r\n  playHandle(data) {\r\n    this.dispatch(VideoEvents.PLAY_EVENT, Object.assign(data, {isFullPause: this.isFullPause}));\r\n  }\r\n\r\n  // 处理ws pause指令\r\n  pauseHandle(data) {\r\n    this.dispatch(VideoEvents.PAUSE_EVENT, Object.assign(data, {isFullPause: this.isFullPause}));\r\n  }\r\n\r\n  // 处理ws close指令\r\n  closeHandle() {\r\n    this.ws.close();\r\n    this.ws = null;\r\n  }\r\n\r\n  // 处理ws fast slow指令\r\n  speedHandle(data) {\r\n    this.dispatch(VideoEvents.SPEED_EVENT, data);\r\n  }\r\n\r\n  // 处理ws complete指令\r\n  completeHandle() {\r\n    this.dispatch(VideoEvents.COMPLETE_EVENT);\r\n  }\r\n\r\n  // 销毁\r\n  destroy() {\r\n    this.close();\r\n    this.ws.close();\r\n    this.ws = null;\r\n    this.offAll();\r\n  }\r\n}","import Event from './utils/event';\r\nimport VideoEvents from './net/video-event';\r\nimport { setLogger } from './utils/debug';\r\nimport BufferController from './buffer/buffer';\r\nimport WSReader from './net/ws-reader';\r\nimport * as debug from './utils/debug';\r\nwindow.MediaSource = window.MediaSource || window.WebKitMediaSource;\r\n\r\nexport default class HSPlayer extends Event {\r\n\r\n  // 向外开放的监听事件类型。\r\n  static get Events() {\r\n    return{\r\n\r\n      // 请求播放视频失败\r\n      SERVER_PLAY_ERR: 'SERVER_PLAY_ERR',\r\n\r\n      // 请求暂停视频失败\r\n      SERVER_PAUSE_ERR: 'SERVER_PAUSE_ERR',\r\n\r\n      // 请求变速失败\r\n      SERVER_SPEED_ERR: 'SERVER_SPEED_ERR',\r\n\r\n      // 服务器的连接出现错误\r\n      SERVER_NET_ERR: 'SERVER_NET_ERR',\r\n\r\n      // 由于网络异常导致到连接中断\r\n      ABNORMAL_DISCONNECT: 'ABNORMAL_DISCONNECT',\r\n\r\n      // 浏览器不支持当前视频的格式\r\n      CHROME_CODEC_UNSUPPORT: 'CHROME_CODEC_UNSUPPORT',\r\n\r\n      // 视频有缺失或被污染\r\n      VIDEO_STREAM_INCORRECT: 'VIDEO_STREAM_INCORRECT',\r\n\r\n      // 实时视频流缓冲太长，需要seek到最新点\r\n      VIDEO_LIVE_STREAM_TOO_LOOG: 'VIDEO_LIVE_STREAM_TOO_LOOG',\r\n\r\n      // 通知前端播放成功\r\n      VIDEO_PLAY_SUCESS: 'VIDEO_PLAY_SUCESS'\r\n\r\n    };\r\n  }\r\n  static isSupported(mimeCode) {\r\n    return (window.MediaSource && window.MediaSource.isTypeSupported(mimeCode));\r\n  }\r\n\r\n  constructor(options) {\r\n    super('HSPlayer');\r\n    this.TAG = '[HSPlayer]';\r\n    let defaults = {\r\n      node: '', // video 节点\r\n      cacheBufferTime: 30, // 回放最大缓存时长 单位秒\r\n      cacheBufferMinTime: 16, // 回放缓存小于cacheBufferMinTime时，重新获取流\r\n      cleanOffset: 2, // 清除buf时剩余的时长，单位秒\r\n      debug: false, // 是否打印出控制台信息\r\n      delayPlay: 0, // 获取实时视频流可以设置延时播放,单位ms\r\n      type: 'live', // live 直播， playback 回放\r\n      wsUrl: null, // websocket 地址，目前项目信令跟视频流都用同一个地址\r\n      flushTime: 3 * 1000, // 清空buffer的间隔，用于直播\r\n    };\r\n    this.options = Object.assign({}, defaults, options); //初始化的配置\r\n    if(this.options.debug) {\r\n      setLogger();\r\n    }\r\n    if (typeof this.options.node === 'string' && this.options.node == '') {\r\n      debug.error(this.TAG, 'no video element were found to render, provide a valid video element');\r\n    }\r\n    this.node = typeof this.options.node === 'string' ? document.getElementById(this.options.node) : this.options.node;\r\n\r\n    this.ev = {\r\n      _onSeek: this._onSeek.bind(this),\r\n      _onMSEOpen: this._onMSEOpen.bind(this),\r\n      _onMSEClose: this._onMSEClose.bind(this),\r\n      _onCanPlay: this._onCanPlay.bind(this),\r\n    };\r\n\r\n    this.node.addEventListener('seeking', this.ev._onSeek);\r\n    this.node.addEventListener('canplay', this.ev._onCanPlay);\r\n\r\n    document.addEventListener('visibilitychange', this._onVisibilityChange.bind(this));\r\n    // 当前页面窗口最小化或者被切换\r\n    this.isHidden = false;\r\n\r\n    this.videoInfo = {\r\n      mime: '', // 暂时只有mime类型字段，\r\n    };\r\n    this.sendRateList = [\r\n      {label: '8倍速', value: 8, speed: 8},\r\n      {label: '4倍速', value: 4, speed: 4},\r\n      {label: '2倍速', value: 2, speed: 2},\r\n      {label: '原速', value: 1, speed: 1},\r\n      {label: '2慢速', value: 0.5, speed: 2},\r\n      {label: '4慢速', value: 0.25, speed: 4},\r\n      {label: '8慢速', value: 0.125, speed: 8},\r\n    ]; // 支持的倍速列表\r\n    this.mediaSource = null; // MSE实例\r\n    this.mseReady = false; // MSE是否open\r\n    this.initMSE();\r\n    this.bufferController = null; // buffer控制器\r\n    this.sourceBuffer = null; // sourceBuffer 传入到mediaSource里的媒体资源;\r\n\r\n    this.pendingBufs = []; // 等待feed的媒体资源\r\n\r\n    this.videoReader = new WSReader(this.options.wsUrl);\r\n\r\n    this.videoReader.on(VideoEvents.READY_EVENT, this._onWsReady.bind(this));\r\n    this.videoReader.on(VideoEvents.CLOSE_EVENT, this._onWsClosed.bind(this));\r\n    this.videoReader.on(VideoEvents.ERROR_EVENT, this._onWsError.bind(this));\r\n    this.videoReader.on(VideoEvents.MIME_EVENT, this._onWsGetMime.bind(this));\r\n    this.videoReader.on(VideoEvents.PLAY_EVENT, this._onWsVideoPlay.bind(this));\r\n    this.videoReader.on(VideoEvents.PAUSE_EVENT, this._onWsVideoPause.bind(this));\r\n    this.videoReader.on(VideoEvents.SPEED_EVENT, this._onWsVideoSpeed.bind(this));\r\n    this.videoReader.on(VideoEvents.COMPLETE_EVENT, this._onWsVideoComplete.bind(this));\r\n    this.videoReader.on(VideoEvents.VIDEO_EVENT, this._onWsVideoBuffer.bind(this));\r\n\r\n    this.checkBufferTimer = null;\r\n    // 定时器清除buffer\r\n    this.startInterval();\r\n\r\n  }\r\n\r\n  startInterval() {\r\n    this.checkBufferTimer = setInterval(() => {\r\n      this.clearBuffer();\r\n    }, this.options.flushTime)\r\n  }\r\n\r\n  stopInterval() {\r\n    if (this.checkBufferTimer) {\r\n      clearInterval(this.checkBufferTimer);\r\n    }\r\n  }\r\n\r\n  // 清理buffer\r\n  clearBuffer() {\r\n    if (!this.bufferController) return;\r\n    let maxTime = this.getLiveStreamNewest();\r\n    if (this.options.type == 'live') {\r\n      if (this.node.currentTime < maxTime) {\r\n        this.node.currentTime = maxTime;\r\n      }\r\n      this.bufferController.initCleanBuf();\r\n    } else {\r\n      // 检查回放缓存的时长\r\n      if ((maxTime - this.options.cacheBufferTime) >= this.node.currentTime) {\r\n        debug.log(this.TAG, `playback cache is full`);\r\n        if (!this.videoReader.isFullPause) {\r\n          // 说明是第一次因为满了而发送暂停指令\r\n          this.videoReader.pause(true);\r\n        }\r\n      } else if ((maxTime - this.node.currentTime) <= this.options.cacheBufferMinTime) {\r\n        if (this.videoReader.isFullPause) {\r\n          debug.log(this.TAG, `palyback cache is empty`);\r\n          this.videoReader.isFullPause = false;\r\n          this.videoReader.play();\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  // 获取当前直播的最新可以播放时间\r\n  getLiveStreamNewest() {\r\n    let buffered = this.node.buffered;\r\n    let maxEnd = -1;\r\n    for (let i = 0; i < buffered.length; i++) {\r\n      let from = buffered.start(i);\r\n      let end = buffered.end(i);\r\n      if(from > maxEnd) {\r\n        if((end - this.options.cleanOffset) > from) {\r\n          maxEnd = end - this.options.cleanOffset;\r\n        } else {\r\n          maxEnd = from;\r\n        }\r\n      }\r\n    }\r\n    return maxEnd;\r\n  }\r\n\r\n  // 初始化mediaSource\r\n  initMSE() {\r\n    this.mediaSource = new MediaSource();\r\n    this.node.src = URL.createObjectURL(this.mediaSource);\r\n    this.mediaSource.addEventListener('sourceopen', this.ev._onMSEOpen);\r\n    this.mediaSource.addEventListener('sourceclose', this.ev._onMSEClose);\r\n  }\r\n\r\n  // _onWsReady\r\n  _onWsReady(ev) {\r\n    debug.log(ev)\r\n  }\r\n\r\n  // _onWsClosed\r\n  _onWsClosed(ev) {\r\n    // 判断是正常关闭，还是由于网络原因异常断开\r\n    if (this.mediaSource && this.node && this.bufferController) {\r\n      this.dispatch(HSPlayer.Events.ABNORMAL_DISCONNECT, {tag: this.TAG, mes: 'ws is abnormal disconnect'})\r\n    } else {\r\n      this.dispatch(HSPlayer.Events.SERVER_NET_ERR, ev)\r\n    }\r\n  }\r\n\r\n  // _onWsError\r\n  _onWsError(err) {\r\n    this.dispatch(HSPlayer.Events.SERVER_NET_ERR, err)\r\n  }\r\n  // 获取到MIME\r\n  _onWsGetMime(data) {\r\n    if (data.ret == 0) {\r\n      this.videoInfo.mime = data.mime;\r\n      this.createBuffer();\r\n      // 成功获取到mime， 接下来发送play指令。\r\n      this.videoReader.play();\r\n    } else {\r\n      debug.log(this.TAG, `get mime type failed`);\r\n      this.dispatch(HSPlayer.Events.SERVER_PLAY_ERR, {msg: 'get mime type failed'})\r\n    }\r\n  }\r\n\r\n  // _onWsVideoPlay\r\n  _onWsVideoPlay(data) {\r\n    if (data.ret == 0) {\r\n      // 请求视频流成功\r\n      this.node.play();\r\n      this.dispatch(HSPlayer.Events.VIDEO_PLAY_SUCESS, {msg: 'video play success'})\r\n    } else {\r\n      debug.log(this.TAG, `open stream failed`);\r\n      this.dispatch(HSPlayer.Events.SERVER_PLAY_ERR, {msg: 'open stream failed'})\r\n    }\r\n  }\r\n\r\n  // _onWsVideoPause\r\n  _onWsVideoPause(data) {\r\n    if (data.ret == 0) {\r\n      // 请求暂停成功\r\n      if (!data.isFullPause) {\r\n        this.node.pause();\r\n        debug.log(this.TAG, `video pause success`);\r\n      }\r\n    } else {\r\n      debug.error(this.TAG, `video pause failed`);\r\n      this.dispatch(HSPlayer.Events.SERVER_PAUSE_ERR, {msg: 'video pause failed'})\r\n    }\r\n  }\r\n\r\n  // _onWsVideoSpeed\r\n  _onWsVideoSpeed(data) {\r\n    if (data.ret == 0) {\r\n      // 请求变速成功\r\n      this.node.playbackRate = this.videoReader.sendRate;\r\n      debug.log(this.TAG, `video speed control success`);\r\n    } else {\r\n      debug.error(this.TAG, `video speed control failed`);\r\n      this.dispatch(HSPlayer.Events.SERVER_SPEED_ERR, {msg: 'video speed control failed'})\r\n    }\r\n  }\r\n\r\n  // _onWsVideoComplete\r\n  _onWsVideoComplete() {\r\n    // 视频流已经全部发送完，\r\n    this.mediaSource.endOfStream();\r\n    this.videoReader.destroy();\r\n  }\r\n\r\n  // _onWsVideoBuffer\r\n  _onWsVideoBuffer(data) {\r\n\r\n    while (this.pendingBufs.length > 0 && this.bufferController) {\r\n      let buf = this.pendingBufs.shift();\r\n      this.bufferController.feed(buf);\r\n    }\r\n\r\n    if(this.bufferController) {\r\n      this.bufferController.feed(data);\r\n    } else {\r\n      this.pendingBufs.push(data);\r\n    }\r\n  }\r\n  // 播放\r\n  play() {\r\n    this.videoReader.play();\r\n  }\r\n  // 暂停\r\n  pause() {\r\n    if (this.options.type == 'live') {\r\n      this.videoReader.pause();\r\n    } else {\r\n      this.node.pause();\r\n    }\r\n  }\r\n  // 关闭\r\n  close() {\r\n    this.stopInterval();\r\n    this.videoReader.close();\r\n  }\r\n  // 调速 8,4,2,1,0.5,0.25,0.125\r\n  speed(sendRate) {\r\n    // 直播不能调速\r\n    if (this.options.type == 'live') {\r\n      debug.log(`${this.TAG} You cannot change the playback speed of the live stream`);\r\n      return false;\r\n    }\r\n    let rate = this.sendRateList.find(x => x.value === sendRate);\r\n    this.videoReader.speed(rate);\r\n  }\r\n\r\n  // 调整当前播放时间，原生video的seeking事件，在目前项目中不会用到，都是重新初始化实现。\r\n  _onSeek() {\r\n\r\n  }\r\n  // 打开mediaSource\r\n  _onMSEOpen() {\r\n    this.mseReady = true;\r\n    // MSE已经打开，开始初始化buffer\r\n    // 这里初始化buffer只是特殊情况下（传输异常导致mse重新open）\r\n    this.createBuffer();\r\n  }\r\n  // mediaSource关闭\r\n  _onMSEClose() {\r\n    this.mseReady = false;\r\n  }\r\n  // video已经准备好，随时播放\r\n  _onCanPlay() {\r\n    debug.log('video is ready to play');\r\n  }\r\n  // 当前浏览器标签页触发hidden事件。\r\n  _onVisibilityChange() {\r\n    if(document.hidden) {\r\n      this.isHidden = true;\r\n      if (this.options.type == 'live') {\r\n        this.videoReader.pause();\r\n      }\r\n    } else {\r\n      // 如果是直播切换为播放状态,如果是回放保持暂停状态\r\n      if (this.options.type == 'live') {\r\n        this.clearBuffer();\r\n        this.play();\r\n      }\r\n      this.isHidden = false;\r\n    }\r\n  }\r\n  // sourceBuffer异常捕获\r\n  _onBufferCtrlError(e) {\r\n    debug.error(e)\r\n    this.dispatch(HSPlyaer.Events.VIDEO_STREAM_INCORRECT, e)\r\n  }\r\n\r\n  // 销毁播放器\r\n  destroy() {\r\n    this.offAll();\r\n    this.stopInterval();\r\n    document.removeEventListener('visibilitychange', () => {});\r\n    if(this.node) {\r\n      this.node.pause();\r\n    }\r\n\r\n    if(this.videoReader) {\r\n      this.videoReader.destroy();\r\n      this.videoReader = null;\r\n    }\r\n\r\n    if (this.mediaSource) {\r\n      try {\r\n        this.mediaSource.removeEventListener('sourceopen', this.ev._onMSEOpen);\r\n        this.mediaSource.removeEventListener('sourceclose', this.ev._onMSEClose);\r\n        if (this.bufferController) {\r\n          if (this.mediaSource.readyState != 'ended')\r\n            this.mediaSource.endOfStream();\r\n          this.mediaSource.removeSourceBuffer(this.sourceBuffer);\r\n        }\r\n      } catch (e) {\r\n        debug.error(`mediasource is not available to end ${e.message}`);\r\n      }\r\n      this.mediaSource = null;\r\n    }\r\n\r\n    if (this.bufferController) {\r\n\r\n      this.bufferController.destroy();\r\n\r\n      this.bufferController = null;\r\n    }\r\n\r\n    if(this.node) {\r\n      this.node.removeEventListener('seeking', this.ev._onSeek);\r\n      this.node.removeEventListener('canplay', this.ev._onCanPlay);\r\n      this.node.removeAttribute('src');\r\n      this.node.load();\r\n      this.node = null;\r\n    }\r\n\r\n    this.options.node = null;\r\n\r\n    this.options = null;\r\n\r\n    this.mseReady = false;\r\n    this.ev = {};\r\n\r\n\r\n    this.videoInfo = {\r\n        mime:''\r\n      };\r\n\r\n    return true;\r\n  }\r\n\r\n\r\n  createBuffer() {\r\n    // sourceBuffer只能存在一个，bufferController已存在则返回，\r\n    if (!this.mseReady || this.bufferController || this.videoInfo.mime == '') return false;\r\n\r\n    if (!HSPlayer.isSupported(this.videoInfo.mime)) {\r\n      debug.error(this.TAG, `Browser does not support codec: ${this.videoInfo.mime}`);\r\n      this.dispatch(HSPlayer.Events.CHROME_CODEC_UNSUPPORT, {errMsg:`Browser does not support codec: ${this.videoInfo.mime}`});\r\n      return false;\r\n    }\r\n    debug.log(this.TAG, `${this.videoInfo.mime}`);\r\n    let sb = this.mediaSource.addSourceBuffer(this.videoInfo.mime);\r\n    sb.mode = 'sequence';\r\n\r\n    this.bufferController = new BufferController(sb, this.cleanOffset);\r\n    this.sourceBuffer = sb;\r\n\r\n    this.bufferController.on(BufferController.ERROR_EVENT, this._onBufferCtrlError.bind(this));\r\n\r\n  }\r\n}"],"names":["debug.log","debug.error"],"mappings":"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"}